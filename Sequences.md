## Postgresql ##

### Letting the database handle the sequence (recommended) ###

There is nothing special on using sequences with postgresql. The recommended way is to just declare your table with i.e. your id to take the default value from a sequence:

```
create sequence myseq
create table JobPosition (
	id int not null default nextval('myseq'),
	name varchar(100) not null,
	primary key (id)
)
```

Then map the `id` column as `autogeneratedPK`:

```
class JobPosition(val name: String)

...

object JobPositionEntity extends Entity[Int,SurrogateIntId, JobPosition] {
	val id = key("id") autogenerated (_.id)
	val name = column("name") to (_.name)
	def constructor(implicit m) = new JobPosition(name) with Stored {
		val id:Int = JobPositionEntity.id
	}
}
```

### Letting mapperdao handle the sequence ###

Similar to before, but this time the default value of the primary key is not defined:

```
create sequence myseq
create table JobPosition (
	id int not null,
	name varchar(100) not null,
	primary key (id)
)
```

Then map the `id` column as `autogenerated`, informing mapperdao about the sequence:

```
object JobPositionEntity extends Entity[Int,SurrogateIntId, JobPosition] {
	val id = key("id") sequence "myseq" autogenerated (_.id)
...
```

This method is not recommended since the code is harder to port across databases, i.e. to databases that don't support
sequences but do support autogenerated columns. Conditionaly, a sequence can be used:

```
object JobPositionEntity extends Entity[Int,SurrogateIntId, JobPosition] {
	val id = key("id") sequence (database match {
		case "postgresql" | "oracle" => Some("myseq")
		case _=> None
	}) autogenerated (_.id)
...
```

A sequence will be used if the database is postgresql or oracle. Otherwise an autogenerated column will be used i.e. an identity
column, depending on the table structure.

## Oracle ##

### Letting the database handle the sequence (recommended) ###

Similarly to postgresql, it is preferable to let oracle handle sequences and just declare your column as autogenerated:

```
// table
create table JobPosition (
	id int not null,
	name varchar(100) not null,
	primary key (id)
);

// sequence
create sequence myseq;

// make sure id gets the value from the sequence.
// this trigger sets the id column to the nextval
// of the sequence
create or replace trigger JobPosition_ID_AutoGenerate
before insert on JobPosition for each row
begin
	select myseq.nextval into :new.id from dual;
end;
```

You can then declare your mapping as just autogenerated:

```
object JobPositionEntity extends Entity[Int,SurrogateIntId, JobPosition] {
	val id = key("id") autogenerated (_.id)
...
```

This code will be portable to other databases that don't support sequences.

### Letting mapperdao handle the sequence ###

But if instead you prefer to let mapperdao manage your sequence, you can:

```
// table
create table JobPosition (
	id int not null,
	name varchar(100) not null,
	primary key (id)
);

// sequence
create sequence myseq;
```

and then declare this sequence to mapperdao:

```
object JobPositionEntity extends Entity[Int,SurrogateIntId, JobPosition] {
	val id = key("id") sequence "myseq" autogenerated (_.id)
...
```

Please also check the [auto-generated wiki](AutoGenerated.md).
